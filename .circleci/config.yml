version: 2.1
orbs:
  docker-cache: cci-x/docker-registry-image-cache@0.2.12

executors:
  hourly:
    machine:
      image: ubuntu-2004:202101-01
      docker_layer_caching: true
    working_directory: ~/myexecutor

jobs:
  my-job:
    executor: hourly
    steps:
    - with-save-restore-images:
        repository: myrepo
        steps:
        - run:
            name: testing
            command: |
              docker pull alpine:3.2
              docker tag alpine:3.2 myrepo/alpine:hello

# Invoke jobs via workflows
# See: https://circleci.com/docs/2.0/configuration-reference/#workflows
workflows:
  say-hello-workflow:
    jobs:
    - my-job
